datos_constantes = {
  Fecha_actual: "2023-01-01",
  eventos: [
    {
      _id: "639c723b992482e5f2834be9",
      nombre: "Partido de las Colectividades",
      imagen: "https://i.postimg.cc/Fs03hQDt/Fiesta-de-las-colectividades.jpg",
      fecha: "2022-12-12",
      descripción: "Disfruta de tus platos favoritos, de diferentes países, en un evento único para toda la familia.",
      Categoría: "Feria de Alimentos",
      Lugar: "Sala A",
      capacidad: 45000,
      asistencia: 42756,
      Precio: 5,
      __v: 0,
    },
    {
      _id: "639c723b992482e5f2834beb",
      nombre: "estilo coreano",
      imagen: "https://i.postimg.cc/ZmD3Xf57/Estilo-coreano.jpg",
      fecha: "2023-08-12",
      descripción : "Disfruta de los mejores platos coreanos, con chefs internacionales y eventos increíbles",
      Categoría: "Feria de Alimentos",
      Lugar: "Sala A",
      capacidad: 45000,
      Precio: 10,
      __v: 0,
      Estimación: 42756,
    },
    {
      _id: "639c723c992482e5f2834bed",
      nombre: "Parque Jurásico",
      imagen: "https://i.postimg.cc/GmHRkbNV/Jurassic-Park.jpg",
      fecha: "2022-11-02",
      descripción:"Vamos a conocer los dinosaurios más grandes en el museo de paleontología",
      Categoría: "Museo",
      lugar: "Campo",
      capacidad: 82000,
      Precio: 15,
      __v: 0,
      asistencia: 65892,
    },
    {
      _id: "639c723c992482e5f2834bef",
      nombre: "Museo Parisino",
      imagen: "https://i.postimg.cc/c4C2zXm8/Museo-Parisino.jpg",
      fecha: "2023-11-02",
      descripción:"Un recorrido único en la ciudad de las luces, conoce uno de los lugares más icónicos.",
      Categoría: "Museo",
      lugar: "París",
      capacidad: 8200,
      Estimación: 8200,
      Precio: 3500,
      __v: 0,
    },
    {
      _id: "639c723c992482e5f2834bf1",
      nombre: "Comicon",
      imagen: "https://i.postimg.cc/KYD0jMf2/comicon.jpg",
      fecha: "2022-02-12",
      descripción:
        "Para los amantes del cómic, todos tus personajes favoritos reunidos en un solo lugar.",
      Categoría: "Fiesta de disfraces",
      Lugar: "Sala C",
      capacidad: 120000,
      asistencia: 110000,
      Precio: 54,
      __v: 0,
    },
    {
      _id: "639c723c992482e5f2834bf3",
      nombre: "Noche de Halloween",
      imagen: "https://i.postimg.cc/RZ9fH4Pr/halloween.jpg",
      fecha: "2023-02-12",
      descripción: "Ven con tu disfraz más terrorífico y gana increíbles premios.",
      Categoría: "Fiesta de disfraces",
      Lugar: "Sala C",
      capacidad: 12000,
      Estimación: 9000,
      Precio: 12,
      __v: 0,
    },
    {
      _id: "639c723c992482e5f2834bf5",
      nombre: "Metallica en concierto",
      imagen: "https://i.postimg.cc/PrMJ0ZMc/Metallica-en-concierto.jpg",
      fecha: "2023-01-22",
      descripción: "El único concierto de la banda más emblemática del mundo.",
      Categoría: "Concierto de música",
      Lugar: "Sala A",
      capacidad: 138000,
      Estimación: 138000,
      Precio: 150,
      __v: 0,
    },
    {
      _id: "639c723c992482e5f2834bf7",
      nombre: "Festival Electronico",
      imagen: "https://i.postimg.cc/KvsSK8cj/Electronic-Fest.jpg",
      fecha: "2022-01-22",
      descripción: "Los mejores DJ’s nacionales e internacionales reunidos en un solo lugar.",
      Categoría: "Concierto de música",
      Lugar: "Sala A",
      capacidad: 138000,
      asistencia: 110300,
      Precio: 250,
      __v: 0,
    },
    {
      _id: "639c723d992482e5f2834bf9",
      nombre: "10K de por vida",
      imagen: "https://i.postimg.cc/fyLqZY9K/10-K-por-la-vida.jpg",
      fecha: "2022-03-01",
      descripción: "Ven a ejercitarte, mejora tu salud y estilo de vida.",
      Categoría: "Carrera",
      Lugar: "Campo de fútbol",
      capacidad: 30000,
      asistencia: 25698,
      Precio: 3,
      __v: 0,
    },
    {
      _id: "639c723d992482e5f2834bfb",
      nombre: "15K NY",
      imagen: "https://i.postimg.cc/zv67r65z/15kny.jpg",
      fecha: "2023-03-01",
      descripción:"Recaudaremos fondos para hospitales y atención médica en este evento único que se llevará a cabo en la Gran Manzana.",
      Categoría: "Carrera",
      Lugar: "Nueva York",
      capacidad: 3000000,
      Precio: 3,
      __v: 0,
      Estimación: 2569800,
    },
    {
      _id: "639c723d992482e5f2834bfd",
      nombre: "Feria del libro escolar",
      imagen: "https://i.postimg.cc/Sst763n6/book1.jpg",
      fecha: "2023-10-15",
      descripción: "Trae tu libro escolar sin usar y llévate el que necesites.",
      Categoría: "Intercambio de libros",
      Lugar: "Sala D1",
      capacidad: 150000,
      Estimación: 123286,
      Precio: 1,
      __v: 0,
    },
    {
      _id: "639c723d992482e5f2834bff",
      nombre: "Solo para tu cocina",
      imagen: "https://i.postimg.cc/05FhxHVK/book4.jpg",
      fecha: "2022-11-09",
      descripción:
        "Si eres amante de la gastronomía ven a hacerte con el recetario que más se adapta a tu gusto y al de tu familia.",
      Categoría: "Intercambio de libros",
      Lugar: "Sala D6",
      capacidad: 130000,
      asistencia: 90000,
      Precio: 100,
      __v: 0,
    },
    {
      _id: "639c723d992482e5f2834c01",
      nombre: "Batman",
      imagen: "https://i.postimg.cc/vH52y81C/cinema4.jpg",
      fecha: "2022-03-11",
      descripción: "Ven a ver a Batman luchar contra el crimen en Ciudad Gótica.",
      Categoría: "Cine",
      Lugar: "Sala D1",
      capacidad: 11000,
      asistencia: 9300,
      Precio: 225,
      __v: 0,
    },
    {
      _id: "639c723d992482e5f2834c03",
      nombre: "Vengadores",
      imagen: "https://i.postimg.cc/T3C92KTN/scale.jpg",
      fecha: "2023-10-15",
      descripción:
        "Marvel's Avengers Premiere en 3D, el inicio de una saga épica con tus superhéroes favoritos.",
      Categoría: "Cine",
      Lugar: "Sala D1",
      capacidad: 9000,
      Estimación: 9000,
      Precio: 250,
      __v: 0,
    },
  ],
};


let Categorías = new Set()


datos_constantes.eventos.forEach(evento => {
  Categorías.add(evento.Categoría);
});

let categoriasArray = Array.from(Categorías);
categoriasArray.sort((a, b) => a.length - b.length);


let checkbox = document.getElementById("checkbox_container")


for (let i = 0; i < categoriasArray.length; i++) {
  let label = document.createElement("label")
      label.className = ""
      label.innerHTML = `
                  <input type="checkbox" value="${categoriasArray[i]}" id= "${categoriasArray[i]}"> ${categoriasArray[i]}
  `
      
  checkbox.insertAdjacentElement("afterbegin",label)                
}

function Eventos(eventos) {

  let container = document.getElementById("container")
  container.innerHTML = "";


  if (eventos.length === 0) {
    container.innerHTML = "<p>No hay eventos para mostrar.</p>";
    return;
}

let fragment = document.createDocumentFragment();

for (let i = 0; i < eventos.length; i++) {
    let tarjeta = document.createElement("div")
        tarjeta.className = "card col-sm-5 col-lg-3 col-xl-2  mb-3 mx-1 p-0"
        tarjeta.innerHTML = `
                    <img src="${eventos[i].imagen}" class="card-img-top h-40 object-fit-cover" alt="${eventos[i].Categoría}">

                    <div class="card-body d-flex flex-column">
                      <h5 class="card-title "> ${eventos[i].nombre}</h5>
                      <p class="card-text flex-grow-1"> ${eventos[i].descripción}</p>
                      <p class="card-text"><span class="fw-bold">Date:</span> ${eventos[i].fecha}</p>
                      <p class="card-text"><span class="fw-bold">Price:</span> ${eventos[i].Precio}</p>
                      <a href="./Pages/details.html?id=${eventos[i]._id}" class="btn btn-primary w-50">Details</a>
                    </div>`

        
    fragment.appendChild(tarjeta)                
}
  container.appendChild(fragment);
}



function filtrarEventos() {
  let texto = document.getElementById("texto").value.toLowerCase();
  let checkboxes = document.querySelectorAll("#checkbox_container input[type='checkbox']:checked");
  let categoriasSeleccionadas = Array.from(checkboxes).map(checkbox => checkbox.value);

  let eventosFiltrados = datos_constantes.eventos.filter(evento => {
      let coincideTexto = evento.nombre.toLowerCase().includes(texto) || evento.descripción.toLowerCase().includes(texto);
      let coincideCategoria = categoriasSeleccionadas.length === 0 || categoriasSeleccionadas.includes(evento.Categoría);
      return coincideTexto && coincideCategoria;
  });

  Eventos(eventosFiltrados);
}

document.getElementById("texto").addEventListener("input", filtrarEventos);

document.querySelectorAll("#checkbox_container input[type='checkbox']").forEach(checkbox => {
    checkbox.addEventListener("change", filtrarEventos);
});


Eventos(datos_constantes.eventos);